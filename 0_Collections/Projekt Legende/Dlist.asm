; BMeine.atr;; Dlist.src; DISPLAYIST FUER PLAYFIELD; (LEGENDE);-----------------------------------------; Original:			1988; Überarbeite: 		06.05.2016; Original: 		BMEINE.ATR; Original Source:	DLIST.SRC ; IDE: ATMASSII (Hofacker);; Every line after this commend remained ; untouched and is written exactly as it; was back in 1988 (except for the adjusted; assembler directives);-----------------------------------------; BUFFER   EQU $5000  ;BILDRAM;DBUFLO	EQU 772   	;BUFFER LOW DBUFHI	EQU 773   	;BUFFER HIDAUX1	EQU 778   	;SEKTORNUMMER LOWDAUX2	EQU 779   	;SEKTORNUMMER HIDCOMND	EQU 770	 	;KOMMANDODSKINV	EQU 58451 	;IO ROTINEPLAYF 	EQU $A000 	;PLAYFIELD.;	ORG $A800	JMP START;DLIST		.byte 112+128		.byte 6+64	.word NAME	.byte 32+128	.byte 14+64	.word BUFFER	.byte 14,14,14+128,14,14,14+128,14,14		.byte 14,14,14+128,14,14,14+128,14,14	.byte 14,14,14+128,14,14,14+128,14,14	.byte 14,14,14+128,14,14,14+128,14,14	.byte 14,14,14+128,14,14,14+128,14,14	.byte 14,14,14+128,14,14,14,14,14	.byte 14,14,14,14,14,14,14,14	.byte 14,14,14,14,14+128	.byte 4+64	.word PLAYF	.byte 4,4,4,4,4,4,4,4,4,4,4,4,4,4	.byte 4+128	.byte 13+128	.byte 2+64	.word SCORE	.byte 2,2	.byte 65;; LOADSCREEN;LOADSCR		.byte 112,112,112,112,112,112	.byte 7+64	.word LSCREEN	.byte 7	.byte 112	.byte 6+64+32LNAME		.byte 0,0	.byte 65	.word LOADSCR;; NAME DES LEVELS UND SCOREANZEIGE;NAME	.byte "”≈… vorsichtig !!!!!"SCORE	.byte "PUNKTE: 00000000         LEBEN: 01      "		.byte "                                        "		.byte "BF'89 SOFTWAREPROJEKTE ALLER ART!!!!    ";; ADRESSEN DER LEVE NAMES;ADR	.byte <L1,<L2,<L3,<L4	.byte <L5,<L6ADRH		.byte >L1,>L2,>L3,>L4	.byte >L5,>L6;; NAMEN DER LEVEL 1-6;L1	.byte "GEHT ES LOS!........"L2	.byte "GEHT WEITER IM TAKT."L3	.byte "GET ES RUND!!!......"L4	.byte "KOMT NOCH EIN LEVEL?"L5	.byte "GET ES RICHTIG LOS! "L6	.byte "DAS FINALE!(ENDLICH)"	;LSCREEN	.byte "DAS SPIEL BEGINNT..."	.byte "UND JETZT:          ";; SEKTORTABELLE FUER BACKGROUNG GR.;STAB		.byte <421,<462,<503,<544	.byte <585,<626STABH		.byte >421,>462,>503,>544	.byte >585,>626;LAENGE	.byte 0 	;ANZAHL DER SEKTORENLEVEL	.byte 3ZAELER	.byte 0 	;FUER VSCROLL;; LADEROTINE FUER:; ZEICHENSATZ 1-3; BACKGROUND GRAFIK; UND PLAYFIELD;; LADE PLAYFIELD;START		JSR SLSCR	LDX LEVEL  		;NUMMER DES LEVELS	LDA STAB,X   	;SEKTORLOW 		STA DAUX1	LDA STABH,X  	;SEKTORHI	STA DAUX2	LDA #<PLAYF		;BUFFERLOW	STA DBUFLO	LDA #>PLAYF	 	;BUFFER HI	STA DBUFHI     	LDA #5	STA LAENGE; LOADLOADBACK		JSR DSKINV	JSR INCBUFF  	;BUFFER+128	JSR SEKTOR	DEC LAENGE	LDA LAENGE   	;ENDE?	CMP #0	BNE LOADBACK 	;NOE ->WEITER.;; ZEICHENSAETZE LADEN;	LDA #<ZSATZ	STA DBUFLO	LDA #>ZSATZ	STA DBUFHI	LDA #18	STA LAENGE;LOADCH	JSR DSKINV	JSR SEKTOR	JSR INCBUFF	DEC LAENGE	LDA LAENGE	CMP #0	BNE LOADCH	JSR UPSCROLL  	;TEXT WEG	JMP RUN;; BUFFER UM 128 BYTES ERHOEHEN.;INCBUFF		CLC	LDA DBUFLO	ADC #128	STA DBUFLO	LDA DBUFHI	ADC #0	STA DBUFHI	RTS;; SEKTOR +1;SEKTOR		CLC	LDA DAUX1	ADC #1	STA DAUX1	LDA DAUX2	ADC #0	STA DAUX2	RTS;; SUBROTINE -LOADSCREEN ZEIGEN;SLSCR		LDX LEVEL  		;LEVELNAME	LDA ADR,X  		;AUSGEBEN.	STA LNAME	LDA ADRH,X	STA LNAME+1;	LDA #<LOADSCR 	;DLIST EIN.	STA 560	LDA #>LOADSCR	STA 561;	LDA #8	STA 54277   	;VSCROLL	STA ZAELERSCROLL		DEC ZAELER  	;TEXT RUNTER-	LDA ZAELER   	;SCROLLEN	STA 54277	JSR WARTEN	LDA ZAELER	CMP #0	BNE SCROLL	RTS;UPSCROLL		LDA #0       	;TEXT RAUF-	STA 54277   	;SCROLLEN.	STA ZAELERUPSC		INC ZAELER	LDA ZAELER	STA 54277	JSR WARTEN	LDA ZAELER	CMP #7	BNE UPSC	RTS;WARTEN		LDA #250     	;KURZ WARTEN.	STA $14WART		LDA $14	BNE WART	RTS;; AKTIVIERE DLI UND ZEIGE PLAYFIELD;RUN		LDA #<DLIST	STA 560	LDA #>DLIST	STA 561;	LDA #<DLI1   	;1. DLI ROTINE	STA 512	  		; AUFRUFEN.	LDA #>DLI1	STA 513	LDA #192	STA 54286;	JMP $5800		;08.05.2016 => Start LegendeMain.asm!;------------------------------------; DISPLAY INTERUPT UNTERPROGRAMME;; -DLI1:GRAPHICS 0 ZEILE RAINBOW COLOR; -DLI2:SPIELFELD BLAU (DUNKEL); -DLI3:SPIELFELD BLAU (HELL  );-------------------------------------;COLPF0	EQU $D016COLPF1	EQU $D017COLPF2	EQU $D018COLPF4	EQU $D01AVCOUNT	EQU $D40BWSYNC	EQU $D40AZEIGER	EQU $D409DLIVKTL	EQU 512DLIVKTH	EQU 513ZSATZ	EQU 18432;DLI1		PHA        			;ALLE REG.VOM STACK	STA WSYNC	LDA #3	STA COLPF2	STA COLPF4	LDA #224     		;BEKOMMT FEST SP.	STA ZEIGER	LDA #<DLI2			;ZEIGER AUF NEUHE	STA DLIVKTL 		; ROTINE.	LDA #>DLI2	STA DLIVKTH	PLA        			;RETURN F.INTERUPT.	RTI;; INTERUPT 2;DLI2		PHA	STA WSYNC	LDA #4	STA COLPF4	LDA #<DLI3	 		;ZEIGER AUF NEUHE	STA DLIVKTL  		;ROTINE.	LDA #>DLI3	STA DLIVKTH	PLA	RTI	;; INTERUPT 3;DLI3		PHA	STA WSYNC	LDA #5	STA COLPF4	LDA #<DLI4  		;ZEIGER AUF NEUHE	STA DLIVKTL  		;ROTINE.	LDA #>DLI4	STA DLIVKTH	PLA	RTI;; INTERUPT 4 ;DLI4		PHA	STA WSYNC	LDA #6	STA COLPF4	LDA #<DLI5	STA DLIVKTL	LDA #>DLI5	STA DLIVKTH	PLA	RTI ;; INTERUPT 5;DLI5		PHA	STA WSYNC	LDA #7	STA COLPF4	LDA #<DLI6 				;ZEIGER AUF NEUHE	STA DLIVKTL  			;ROTINE.	LDA #>DLI6	STA DLIVKTH	PLA	RTI;; INTERUPT 6;DLI6		PHA	STA WSYNC	LDA #8	STA COLPF4	LDA #<DLI7  			;ZEIGER AUF NEUHE	STA DLIVKTL  			;ROTINE.	LDA #>DLI7	STA DLIVKTH	PLA	RTI;; INTERUPT 7;DLI7		PHA	STA WSYNC	LDA #9	STA COLPF4	LDA #50	STA COLPF2	LDA #<DLI8  			;ZEIGER AUF NEUHE	STA DLIVKTL  			;ROTINE.	LDA #>DLI8	STA DLIVKTH	PLA	RTI	;; INTERUPT 8;DLI8		PHA	STA WSYNC	LDA #10	STA COLPF4	LDA #<DLI9  			;ZEIGER AUF NEUHE	STA DLIVKTL 			;ROTINE.	LDA #>DLI9	STA DLIVKTH	PLA	RTI;; INTERUPT 9 ;DLI9		PHA	STA WSYNC	LDA #11	STA COLPF4	LDA #<DLI10	STA DLIVKTL	LDA #>DLI10	STA DLIVKTH	PLA	RTI ;; INTERUPT 10;DLI10		PHA	STA WSYNC	LDA #12	STA COLPF4	LDA #<DLI11  			;ZEIGER AUF NEUHE	STA DLIVKTL  			;ROTINE.	LDA #>DLI11	STA DLIVKTH	PLA	RTI;; INTERUPT 11;DLI11		PHA       				;ALLE REG.VOM STACK	STA WSYNC	LDA #13	STA COLPF4	LDA #<DLI12 			;ZEIGER AUF NEUHE	STA DLIVKTL  			;ROTINE.	LDA #>DLI12	STA DLIVKTH	PLA       				;RETURN F.INTERUPT.	RTI;; INTERUPT 12;DLI12		PHA	STA WSYNC	LDA #14	STA COLPF4	LDA #<DLI13 			;ZEIGER AUF NEUHE	STA DLIVKTL  			;ROTINE.	LDA #>DLI13	STA DLIVKTH	PLA	RTI	;; INTERUPT 13;DLI13		PHA	STA WSYNC	LDA #50	STA COLPF4	LDA #<DLI14 			;ZEIGER AUF NEUHE	STA DLIVKTL  			;ROTINE.	LDA #>DLI14	STA DLIVKTH	PLA	RTI;; INTERUPT 14 ;DLI14		PHA	STA WSYNC	LDA #5	STA COLPF4	LDA #>ZSATZ	STA ZEIGER	LDA #<DLI15	STA DLIVKTL	LDA #>DLI15	STA DLIVKTH	PLA	RTI ;; INTERUPT 15;DLI15		PHA	STA WSYNC	LDA #1	STA COLPF4	LDA #50	STA COLPF2	LDA #<DLI16	STA DLIVKTL	LDA #>DLI16	STA DLIVKTH	PLA	RTI;; INTERUPT 16;DLI16		PHA	STA WSYNC	LDA #25	STA COLPF2	STA COLPF4	LDA #224	STA ZEIGER	LDA #<DLI1	 			;ZEIGER AUF NEUHE	STA DLIVKTL  			;ROTINE.	LDA #>DLI1	STA DLIVKTH	PLA	RTI